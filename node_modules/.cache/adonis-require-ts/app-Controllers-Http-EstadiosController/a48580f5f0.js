"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Database_1 = __importDefault(global[Symbol.for('ioc.use')]("Adonis/Lucid/Database"));
const Estadio_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/Estadio"));
class EstadiosController {
    async store({ auth, request, response }) {
        const Estadios = new Estadio_1.default();
        const Nombre = request.input('Nombre');
        const Ubicacion = request.input('Ubicacion');
        try {
            await auth.use('api').authenticate();
            Estadios.Nombre = Nombre;
            Estadios.Ubicacion = Ubicacion;
            await Estadios.save();
            return response.status(200);
        }
        catch {
            return response.badRequest('No tienes permisos');
        }
    }
    async show({ auth, response }) {
        try {
            await auth.use('api').authenticate();
            console.log(auth.use('api').user);
            const Estadios = Database_1.default.query()
                .from('estadios')
                .select('estadios.id')
                .select('estadios.Nombre_Estadio as Nombre')
                .select('estadios.Ubicacion_Estadio as Ubicacion');
            return Estadios;
        }
        catch {
            response.badRequest('No tienes permiso');
        }
    }
    async update({ auth, request, response }) {
        const id = request.input('id');
        const Nombre = request.input('Nombre');
        const Ubicacion = request.input('Ubicacion');
        try {
            await auth.use('api').authenticate();
            console.log(auth.use('api').user);
            const Estadios = await Estadio_1.default.findOrFail(id);
            Estadios.Nombre = Nombre;
            Estadios.Ubicacion = Ubicacion;
            await Estadios.save();
        }
        catch {
            return response.badRequest('ERROR');
        }
    }
    async delete({ auth, params, response }) {
        try {
            await auth.use('api').authenticate();
            console.log(auth.use('api').user);
            const Estadios = await Estadio_1.default.findOrFail(params.id);
            await Estadios.delete();
        }
        catch {
            return response.badRequest('ERROR');
        }
    }
}
exports.default = EstadiosController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXN0YWRpb3NDb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiRXN0YWRpb3NDb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0EsMkZBQWtEO0FBQ2xELHVGQUF5QztBQUN6QyxNQUFxQixrQkFBa0I7SUFFNUIsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFDLElBQUksRUFBQyxPQUFPLEVBQUMsUUFBUSxFQUFDO1FBRXRDLE1BQU0sUUFBUSxHQUFDLElBQUksaUJBQU8sRUFBRSxDQUFBO1FBQzVCLE1BQU0sTUFBTSxHQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUE7UUFDcEMsTUFBTSxTQUFTLEdBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQTtRQUMxQyxJQUNBO1lBQ0ksTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLFlBQVksRUFBRSxDQUFBO1lBQ3BDLFFBQVEsQ0FBQyxNQUFNLEdBQUMsTUFBTSxDQUFBO1lBQ3RCLFFBQVEsQ0FBQyxTQUFTLEdBQUMsU0FBUyxDQUFBO1lBQzVCLE1BQU0sUUFBUSxDQUFDLElBQUksRUFBRSxDQUFBO1lBQ3JCLE9BQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQTtTQUM5QjtRQUFBLE1BQ0Q7WUFDSSxPQUFPLFFBQVEsQ0FBQyxVQUFVLENBQUMsb0JBQW9CLENBQUMsQ0FBQTtTQUNuRDtJQUNMLENBQUM7SUFDTSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUMsSUFBSSxFQUFDLFFBQVEsRUFBQztRQUU3QixJQUNBO1lBQ0ksTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLFlBQVksRUFBRSxDQUFBO1lBQ3BDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFLLENBQUMsQ0FBQTtZQUNsQyxNQUFNLFFBQVEsR0FBQyxrQkFBUSxDQUFDLEtBQUssRUFBRTtpQkFDOUIsSUFBSSxDQUFDLFVBQVUsQ0FBQztpQkFDaEIsTUFBTSxDQUFDLGFBQWEsQ0FBQztpQkFDckIsTUFBTSxDQUFDLG1DQUFtQyxDQUFDO2lCQUMzQyxNQUFNLENBQUMseUNBQXlDLENBQUMsQ0FBQTtZQUNsRCxPQUFPLFFBQVEsQ0FBQTtTQUNsQjtRQUFBLE1BQ0Q7WUFDSSxRQUFRLENBQUMsVUFBVSxDQUFDLG1CQUFtQixDQUFDLENBQUE7U0FDM0M7SUFDTCxDQUFDO0lBQ00sS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFDLElBQUksRUFBQyxPQUFPLEVBQUMsUUFBUSxFQUFDO1FBRXZDLE1BQU0sRUFBRSxHQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUE7UUFDNUIsTUFBTSxNQUFNLEdBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQUNwQyxNQUFNLFNBQVMsR0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQzFDLElBQ0E7WUFDSSxNQUFNLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsWUFBWSxFQUFFLENBQUE7WUFDcEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUssQ0FBQyxDQUFBO1lBQ2xDLE1BQU0sUUFBUSxHQUFDLE1BQU0saUJBQU8sQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUE7WUFDM0MsUUFBUSxDQUFDLE1BQU0sR0FBQyxNQUFNLENBQUE7WUFDdEIsUUFBUSxDQUFDLFNBQVMsR0FBQyxTQUFTLENBQUE7WUFDNUIsTUFBTSxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUE7U0FDeEI7UUFBQSxNQUNEO1lBQ0ksT0FBTyxRQUFRLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1NBQ3RDO0lBQ0wsQ0FBQztJQUNNLEtBQUssQ0FBQyxNQUFNLENBQUMsRUFBQyxJQUFJLEVBQUMsTUFBTSxFQUFDLFFBQVEsRUFBQztRQUV0QyxJQUNBO1lBQ0ksTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLFlBQVksRUFBRSxDQUFBO1lBQ3BDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFLLENBQUMsQ0FBQTtZQUNsQyxNQUFNLFFBQVEsR0FBQyxNQUFNLGlCQUFPLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQTtZQUNsRCxNQUFNLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQTtTQUMxQjtRQUFBLE1BQ0Q7WUFDSSxPQUFPLFFBQVEsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUE7U0FDdEM7SUFDTCxDQUFDO0NBQ0o7QUFuRUQscUNBbUVDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IHR5cGUgeyBIdHRwQ29udGV4dENvbnRyYWN0IH0gZnJvbSAnQGlvYzpBZG9uaXMvQ29yZS9IdHRwQ29udGV4dCdcbmltcG9ydCBEYXRhYmFzZSBmcm9tIFwiQGlvYzpBZG9uaXMvTHVjaWQvRGF0YWJhc2VcIjtcbmltcG9ydCBFc3RhZGlvIGZyb20gXCJBcHAvTW9kZWxzL0VzdGFkaW9cIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVzdGFkaW9zQ29udHJvbGxlciBcbntcbiAgICBwdWJsaWMgYXN5bmMgc3RvcmUoe2F1dGgscmVxdWVzdCxyZXNwb25zZX0pXG4gICAge1xuICAgICAgICBjb25zdCBFc3RhZGlvcz1uZXcgRXN0YWRpbygpXG4gICAgICAgIGNvbnN0IE5vbWJyZT1yZXF1ZXN0LmlucHV0KCdOb21icmUnKVxuICAgICAgICBjb25zdCBVYmljYWNpb249cmVxdWVzdC5pbnB1dCgnVWJpY2FjaW9uJylcbiAgICAgICAgdHJ5XG4gICAgICAgIHtcbiAgICAgICAgICAgIGF3YWl0IGF1dGgudXNlKCdhcGknKS5hdXRoZW50aWNhdGUoKVxuICAgICAgICAgICAgRXN0YWRpb3MuTm9tYnJlPU5vbWJyZVxuICAgICAgICAgICAgRXN0YWRpb3MuVWJpY2FjaW9uPVViaWNhY2lvblxuICAgICAgICAgICAgYXdhaXQgRXN0YWRpb3Muc2F2ZSgpXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDIwMClcbiAgICAgICAgfWNhdGNoXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5iYWRSZXF1ZXN0KCdObyB0aWVuZXMgcGVybWlzb3MnKVxuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyBzaG93KHthdXRoLHJlc3BvbnNlfSlcbiAgICB7XG4gICAgICAgIHRyeVxuICAgICAgICB7XG4gICAgICAgICAgICBhd2FpdCBhdXRoLnVzZSgnYXBpJykuYXV0aGVudGljYXRlKClcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGF1dGgudXNlKCdhcGknKS51c2VyISlcbiAgICAgICAgICAgIGNvbnN0IEVzdGFkaW9zPURhdGFiYXNlLnF1ZXJ5KClcbiAgICAgICAgICAgIC5mcm9tKCdlc3RhZGlvcycpXG4gICAgICAgICAgICAuc2VsZWN0KCdlc3RhZGlvcy5pZCcpXG4gICAgICAgICAgICAuc2VsZWN0KCdlc3RhZGlvcy5Ob21icmVfRXN0YWRpbyBhcyBOb21icmUnKVxuICAgICAgICAgICAgLnNlbGVjdCgnZXN0YWRpb3MuVWJpY2FjaW9uX0VzdGFkaW8gYXMgVWJpY2FjaW9uJylcbiAgICAgICAgICAgIHJldHVybiBFc3RhZGlvc1xuICAgICAgICB9Y2F0Y2hcbiAgICAgICAge1xuICAgICAgICAgICAgcmVzcG9uc2UuYmFkUmVxdWVzdCgnTm8gdGllbmVzIHBlcm1pc28nKVxuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyB1cGRhdGUoe2F1dGgscmVxdWVzdCxyZXNwb25zZX0pXG4gICAge1xuICAgICAgICBjb25zdCBpZD1yZXF1ZXN0LmlucHV0KCdpZCcpXG4gICAgICAgIGNvbnN0IE5vbWJyZT1yZXF1ZXN0LmlucHV0KCdOb21icmUnKVxuICAgICAgICBjb25zdCBVYmljYWNpb249cmVxdWVzdC5pbnB1dCgnVWJpY2FjaW9uJylcbiAgICAgICAgdHJ5XG4gICAgICAgIHtcbiAgICAgICAgICAgIGF3YWl0IGF1dGgudXNlKCdhcGknKS5hdXRoZW50aWNhdGUoKVxuICAgICAgICAgICAgY29uc29sZS5sb2coYXV0aC51c2UoJ2FwaScpLnVzZXIhKVxuICAgICAgICAgICAgY29uc3QgRXN0YWRpb3M9YXdhaXQgRXN0YWRpby5maW5kT3JGYWlsKGlkKVxuICAgICAgICAgICAgRXN0YWRpb3MuTm9tYnJlPU5vbWJyZVxuICAgICAgICAgICAgRXN0YWRpb3MuVWJpY2FjaW9uPVViaWNhY2lvblxuICAgICAgICAgICAgYXdhaXQgRXN0YWRpb3Muc2F2ZSgpXG4gICAgICAgIH1jYXRjaFxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuYmFkUmVxdWVzdCgnRVJST1InKVxuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBhc3luYyBkZWxldGUoe2F1dGgscGFyYW1zLHJlc3BvbnNlfSlcbiAgICB7XG4gICAgICAgIHRyeVxuICAgICAgICB7XG4gICAgICAgICAgICBhd2FpdCBhdXRoLnVzZSgnYXBpJykuYXV0aGVudGljYXRlKClcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGF1dGgudXNlKCdhcGknKS51c2VyISlcbiAgICAgICAgICAgIGNvbnN0IEVzdGFkaW9zPWF3YWl0IEVzdGFkaW8uZmluZE9yRmFpbChwYXJhbXMuaWQpXG4gICAgICAgICAgICBhd2FpdCBFc3RhZGlvcy5kZWxldGUoKVxuICAgICAgICB9Y2F0Y2hcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmJhZFJlcXVlc3QoJ0VSUk9SJylcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdfQ==