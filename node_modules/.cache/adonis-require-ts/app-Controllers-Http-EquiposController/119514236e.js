"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Equipo_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/Equipo"));
const Database_1 = __importDefault(global[Symbol.for('ioc.use')]("Adonis/Lucid/Database"));
class EquiposController {
    async store({ auth, request, response }) {
        const Equipos = new Equipo_1.default();
        const Nombre = request.input('Nombre');
        const Presidente = request.input('Presidente');
        const DT = request.input('DT');
        const Estadio = request.input('Estadio');
        try {
            await auth.use('api').authenticate();
            Equipos.Nombre_Equipo = Nombre;
            Equipos.Presidente_Equipo = Presidente;
            Equipos.DT_Equipo = DT;
            Equipos.Estadio = Estadio;
            await Equipos.save();
            return response.status(200);
        }
        catch {
            return response.badRequest('No tienes permisos');
        }
    }
    async show({ auth, response }) {
        try {
            await auth.use('api').authenticate();
            console.log(auth.use('api').user);
            const Equipos = Database_1.default.query()
                .from('equipos')
                .select('equipos.id')
                .select('equipos.Nombre_Equipo as Nombre');
            return Equipos;
        }
        catch {
            response.badRequest('No tienes permiso');
        }
    }
    async update({ auth, request, response }) {
        const id = request.input('id');
        const Nombre = request.input('Nombre');
        const Presidente = request.input('Presidente');
        const DT = request.input('DT');
        const Estadio = request.input('Estadio');
        try {
            await auth.use('api').authenticate();
            console.log(auth.use('api').user);
            const Equipos = await Equipo_1.default.findOrFail(id);
            Equipos.Nombre_Equipo = Nombre;
            Equipos.Presidente_Equipo = Presidente;
            Equipos.DT_Equipo = DT;
            Equipos.Estadio = Estadio;
            await Equipos.save();
            return response.status(200);
        }
        catch {
            return response.badRequest('ERROR');
        }
    }
    async delete({ auth, request, response, params }) {
        try {
            await auth.use('api').authenticate();
            const Equipos = await Equipo_1.default.findOrFail(params.id);
            await Equipos.delete();
        }
        catch {
            return response.badRequest('ERROR');
        }
    }
    async DatosEquipoMod({ auth, params, response }) {
        try {
            await auth.use('api').authenticate();
            const Equipos = Database_1.default.query()
                .from('equipo_ligas')
                .join('equipos', 'equipo_ligas.Equipo', '=', 'equipos.id')
                .join('ligas', 'equipo_ligas.Liga', '=', 'ligas.id')
                .select('equipos.id')
                .select('equipos.Nombre_Equipo as Equipo')
                .select('equipos.Presidente_Equipo as Presidente')
                .select('ligas.Nombre_Liga as Liga')
                .join('estadios', 'equipos.Estadio', '=', 'estadios.id')
                .select('estadios.Nombre_Estadio as Estadio')
                .join('dt', 'equipos.DT_Equipo', '=', 'dt.id')
                .select('dt.Nombre_DT as Director_Tecnico')
                .where('equipos.id', '=', params.id);
            return Equipos;
        }
        catch {
            return response.badRequest('Algo salio mal');
        }
    }
    async DatosEquipo({ auth, response }) {
        try {
            await auth.use('api').authenticate();
            const Equipos = Database_1.default.query()
                .from('equipo_ligas')
                .join('equipos', 'equipo_ligas.Equipo', '=', 'equipos.id')
                .join('ligas', 'equipo_ligas.Liga', '=', 'ligas.id')
                .select('equipos.id')
                .select('equipos.Nombre_Equipo as Equipo')
                .select('ligas.Nombre_Liga as Liga')
                .join('estadios', 'equipos.Estadio', '=', 'estadios.id')
                .select('estadios.Nombre_Estadio as Estadio')
                .select('estadios.Ubicacion_Estadio as Ciudad')
                .join('dt', 'equipos.DT_Equipo', '=', 'dt.id')
                .select('dt.Nombre_DT as Director_Tecnico');
            return Equipos;
        }
        catch {
            return response.badRequest('Algo salio mal');
        }
    }
}
exports.default = EquiposController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXF1aXBvc0NvbnRyb2xsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJFcXVpcG9zQ29udHJvbGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUNBLHFGQUF1QztBQUN2QywyRkFBa0Q7QUFDbEQsTUFBcUIsaUJBQWlCO0lBRTNCLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBQyxJQUFJLEVBQUMsT0FBTyxFQUFDLFFBQVEsRUFBQztRQUV0QyxNQUFNLE9BQU8sR0FBQyxJQUFJLGdCQUFNLEVBQUUsQ0FBQTtRQUMxQixNQUFNLE1BQU0sR0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFBO1FBQ3BDLE1BQU0sVUFBVSxHQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUE7UUFDNUMsTUFBTSxFQUFFLEdBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUM1QixNQUFNLE9BQU8sR0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQ3RDLElBQ0E7WUFDSSxNQUFNLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsWUFBWSxFQUFFLENBQUE7WUFDcEMsT0FBTyxDQUFDLGFBQWEsR0FBQyxNQUFNLENBQUE7WUFDNUIsT0FBTyxDQUFDLGlCQUFpQixHQUFDLFVBQVUsQ0FBQTtZQUNwQyxPQUFPLENBQUMsU0FBUyxHQUFDLEVBQUUsQ0FBQTtZQUNwQixPQUFPLENBQUMsT0FBTyxHQUFDLE9BQU8sQ0FBQTtZQUN2QixNQUFNLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQTtZQUNwQixPQUFPLFFBQVEsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUE7U0FDOUI7UUFBQSxNQUNEO1lBQ0ksT0FBTyxRQUFRLENBQUMsVUFBVSxDQUFDLG9CQUFvQixDQUFDLENBQUE7U0FDbkQ7SUFDTCxDQUFDO0lBQ00sS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFD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QUFDO2lCQUN6QyxNQUFNLENBQUMsMkJBQTJCLENBQUM7aUJBQ25DLElBQUksQ0FBQyxVQUFVLEVBQUMsaUJBQWlCLEVBQUMsR0FBRyxFQUFDLGFBQWEsQ0FBQztpQkFDcEQsTUFBTSxDQUFDLG9DQUFvQyxDQUFDO2lCQUM1QyxNQUFNLENBQUMsc0NBQXNDLENBQUM7aUJBQzlDLElBQUksQ0FBQyxJQUFJLEVBQUMsbUJBQW1CLEVBQUMsR0FBRyxFQUFDLE9BQU8sQ0FBQztpQkFDMUMsTUFBTSxDQUFDLGtDQUFrQyxDQUFDLENBQUE7WUFDM0MsT0FBTyxPQUFPLENBQUE7U0FDakI7UUFBQSxNQUNEO1lBQ0ksT0FBTyxRQUFRLENBQUMsVUFBVSxDQUFDLGdCQUFnQixDQUFDLENBQUE7U0FDL0M7SUFDTCxDQUFDO0NBRUo7QUE3SEQsb0NBNkhDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IHR5cGUgeyBIdHRwQ29udGV4dENvbnRyYWN0IH0gZnJvbSAnQGlvYzpBZG9uaXMvQ29yZS9IdHRwQ29udGV4dCdcbmltcG9ydCBFcXVpcG8gZnJvbSBcIkFwcC9Nb2RlbHMvRXF1aXBvXCI7XG5pbXBvcnQgRGF0YWJhc2UgZnJvbSBcIkBpb2M6QWRvbmlzL0x1Y2lkL0RhdGFiYXNlXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFcXVpcG9zQ29udHJvbGxlciBcbntcbiAgICBwdWJsaWMgYXN5bmMgc3RvcmUoe2F1dGgscmVxdWVzdCxyZXNwb25zZX0pXG4gICAge1xuICAgICAgICBjb25zdCBFcXVpcG9zPW5ldyBFcXVpcG8oKVxuICAgICAgICBjb25zdCBOb21icmU9cmVxdWVzdC5pbnB1dCgnTm9tYnJlJylcbiAgICAgICAgY29uc3QgUHJlc2lkZW50ZT1yZXF1ZXN0LmlucHV0KCdQcmVzaWRlbnRlJylcbiAgICAgICAgY29uc3QgRFQ9cmVxdWVzdC5pbnB1dCgnRFQnKVxuICAgICAgICBjb25zdCBFc3RhZGlvPXJlcXVlc3QuaW5wdXQoJ0VzdGFkaW8nKVxuICAgICAgICB0cnlcbiAgICAgICAge1xuICAgICAgICAgICAgYXdhaXQgYXV0aC51c2UoJ2FwaScpLmF1dGhlbnRpY2F0ZSgpXG4gICAgICAgICAgICBFcXVpcG9zLk5vbWJyZV9FcXVpcG89Tm9tYnJlXG4gICAgICAgICAgICBFcXVpcG9zLlByZXNpZGVudGVfRXF1aXBvPVByZXNpZGVudGVcbiAgICAgICAgICAgIEVxdWlwb3MuRFRfRXF1aXBvPURUXG4gICAgICAgICAgICBFcXVpcG9zLkVzdGFkaW89RXN0YWRpb1xuICAgICAgICAgICAgYXdhaXQgRXF1aXBvcy5zYXZlKClcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoMjAwKVxuICAgICAgICB9Y2F0Y2hcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmJhZFJlcXVlc3QoJ05vIHRpZW5lcyBwZXJtaXNvcycpXG4gICAgICAgIH1cbiAgICB9XG4gICAgcHVibGljIGFzeW5jIHNob3coe2F1dGgscmVzcG9uc2V9KVxuICAgIHtcbiAgICAgICAgdHJ5XG4gICAgICAgIHtcbiAgICAgICAgICAgIGF3YWl0IGF1dGgudXNlKCdhcGknKS5hdXRoZW50aWNhdGUoKVxuICAgICAgICAgICAgY29uc29sZS5sb2coYXV0aC51c2UoJ2FwaScpLnVzZXIhKVxuICAgICAgICAgICAgY29uc3QgRXF1aXBvcz1EYXRhYmFzZS5xdWVyeSgpXG4gICAgICAgICAgICAuZnJvbSgnZXF1aXBvcycpXG4gICAgICAgICAgICAuc2VsZWN0KCdlcXVpcG9zLmlkJylcbiAgICAgICAgICAgIC5zZWxlY3QoJ2VxdWlwb3MuTm9tYnJlX0VxdWlwbyBhcyBOb21icmUnKVxuICAgICAgICAgICAgcmV0dXJuIEVxdWlwb3NcbiAgICAgICAgfWNhdGNoXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLmJhZFJlcXVlc3QoJ05vIHRpZW5lcyBwZXJtaXNvJylcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaWMgYXN5bmMgdXBkYXRlKHthdXRoLHJlcXVlc3QscmVzcG9uc2V9KVxuICAgIHtcbiAgICAgICAgY29uc3QgaWQ9cmVxdWVzdC5pbnB1dCgnaWQnKVxuICAgICAgICBjb25zdCBOb21icmU9cmVxdWVzdC5pbnB1dCgnTm9tYnJlJylcbiAgICAgICAgY29uc3QgUHJlc2lkZW50ZT1yZXF1ZXN0LmlucHV0KCdQcmVzaWRlbnRlJylcbiAgICAgICAgY29uc3QgRFQ9cmVxdWVzdC5pbnB1dCgnRFQnKVxuICAgICAgICBjb25zdCBFc3RhZGlvPXJlcXVlc3QuaW5wdXQoJ0VzdGFkaW8nKVxuICAgICAgICB0cnlcbiAgICAgICAge1xuICAgICAgICAgICAgYXdhaXQgYXV0aC51c2UoJ2FwaScpLmF1dGhlbnRpY2F0ZSgpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhhdXRoLnVzZSgnYXBpJykudXNlciEpXG4gICAgICAgICAgICBjb25zdCBFcXVpcG9zPWF3YWl0IEVxdWlwby5maW5kT3JGYWlsKGlkKVxuICAgICAgICAgICAgRXF1aXBvcy5Ob21icmVfRXF1aXBvPU5vbWJyZVxuICAgICAgICAgICAgRXF1aXBvcy5QcmVzaWRlbnRlX0VxdWlwbz1QcmVzaWRlbnRlXG4gICAgICAgICAgICBFcXVpcG9zLkRUX0VxdWlwbz1EVFxuICAgICAgICAgICAgRXF1aXBvcy5Fc3RhZGlvPUVzdGFkaW9cbiAgICAgICAgICAgIGF3YWl0IEVxdWlwb3Muc2F2ZSgpXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzKDIwMClcbiAgICAgICAgfWNhdGNoXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5iYWRSZXF1ZXN0KCdFUlJPUicpXG4gICAgICAgIH1cbiAgICB9XG4gICAgcHVibGljIGFzeW5jIGRlbGV0ZSh7YXV0aCxyZXF1ZXN0LHJlc3BvbnNlLHBhcmFtc30pXG4gICAge1xuICAgICAgICB0cnlcbiAgICAgICAge1xuICAgICAgICAgICAgYXdhaXQgYXV0aC51c2UoJ2FwaScpLmF1dGhlbnRpY2F0ZSgpXG4gICAgICAgICAgICBjb25zdCBFcXVpcG9zPWF3YWl0IEVxdWlwby5maW5kT3JGYWlsKHBhcmFtcy5pZClcbiAgICAgICAgICAgIGF3YWl0IEVxdWlwb3MuZGVsZXRlKClcbiAgICAgICAgICAgIFxuICAgICAgICB9Y2F0Y2hcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmJhZFJlcXVlc3QoJ0VSUk9SJylcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaWMgYXN5bmMgRGF0b3NFcXVpcG9Nb2Qoe2F1dGgscGFyYW1zLHJlc3BvbnNlfSlcbiAgICB7XG4gICAgICAgIHRyeVxuICAgICAgICB7XG4gICAgICAgICAgICBhd2FpdCBhdXRoLnVzZSgnYXBpJykuYXV0aGVudGljYXRlKClcbiAgICAgICAgICAgIGNvbnN0IEVxdWlwb3M9XG4gICAgICAgICAgICBEYXRhYmFzZS5xdWVyeSgpXG4gICAgICAgICAgICAuZnJvbSgnZXF1aXBvX2xpZ2FzJylcbiAgICAgICAgICAgIC5qb2luKCdlcXVpcG9zJywnZXF1aXBvX2xpZ2FzLkVxdWlwbycsJz0nLCdlcXVpcG9zLmlkJylcbiAgICAgICAgICAgIC5qb2luKCdsaWdhcycsJ2VxdWlwb19saWdhcy5MaWdhJywnPScsJ2xpZ2FzLmlkJylcbiAgICAgICAgICAgIC5zZWxlY3QoJ2VxdWlwb3MuaWQnKVxuICAgICAgICAgICAgLnNlbGVjdCgnZXF1aXBvcy5Ob21icmVfRXF1aXBvIGFzIEVxdWlwbycpXG4gICAgICAgICAgICAuc2VsZWN0KCdlcXVpcG9zLlByZXNpZGVudGVfRXF1aXBvIGFzIFByZXNpZGVudGUnKVxuICAgICAgICAgICAgLnNlbGVjdCgnbGlnYXMuTm9tYnJlX0xpZ2EgYXMgTGlnYScpXG4gICAgICAgICAgICAuam9pbignZXN0YWRpb3MnLCdlcXVpcG9zLkVzdGFkaW8nLCc9JywnZXN0YWRpb3MuaWQnKVxuICAgICAgICAgICAgLnNlbGVjdCgnZXN0YWRpb3MuTm9tYnJlX0VzdGFkaW8gYXMgRXN0YWRpbycpXG4gICAgICAgICAgICAuam9pbignZHQnLCdlcXVpcG9zLkRUX0VxdWlwbycsJz0nLCdkdC5pZCcpXG4gICAgICAgICAgICAuc2VsZWN0KCdkdC5Ob21icmVfRFQgYXMgRGlyZWN0b3JfVGVjbmljbycpXG4gICAgICAgICAgICAud2hlcmUoJ2VxdWlwb3MuaWQnLCc9JyxwYXJhbXMuaWQpXG4gICAgICAgICAgICByZXR1cm4gRXF1aXBvc1xuICAgICAgICB9Y2F0Y2hcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmJhZFJlcXVlc3QoJ0FsZ28gc2FsaW8gbWFsJylcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaWMgYXN5bmMgRGF0b3NFcXVpcG8oe2F1dGgscmVzcG9uc2V9KVxuICAgIHtcbiAgICAgICAgdHJ5XG4gICAgICAgIHtcbiAgICAgICAgICAgIGF3YWl0IGF1dGgudXNlKCdhcGknKS5hdXRoZW50aWNhdGUoKVxuICAgICAgICAgICAgY29uc3QgRXF1aXBvcz1cbiAgICAgICAgICAgIERhdGFiYXNlLnF1ZXJ5KClcbiAgICAgICAgICAgIC5mcm9tKCdlcXVpcG9fbGlnYXMnKVxuICAgICAgICAgICAgLmpvaW4oJ2VxdWlwb3MnLCdlcXVpcG9fbGlnYXMuRXF1aXBvJywnPScsJ2VxdWlwb3MuaWQnKVxuICAgICAgICAgICAgLmpvaW4oJ2xpZ2FzJywnZXF1aXBvX2xpZ2FzLkxpZ2EnLCc9JywnbGlnYXMuaWQnKVxuICAgICAgICAgICAgLnNlbGVjdCgnZXF1aXBvcy5pZCcpXG4gICAgICAgICAgICAuc2VsZWN0KCdlcXVpcG9zLk5vbWJyZV9FcXVpcG8gYXMgRXF1aXBvJylcbiAgICAgICAgICAgIC5zZWxlY3QoJ2xpZ2FzLk5vbWJyZV9MaWdhIGFzIExpZ2EnKVxuICAgICAgICAgICAgLmpvaW4oJ2VzdGFkaW9zJywnZXF1aXBvcy5Fc3RhZGlvJywnPScsJ2VzdGFkaW9zLmlkJylcbiAgICAgICAgICAgIC5zZWxlY3QoJ2VzdGFkaW9zLk5vbWJyZV9Fc3RhZGlvIGFzIEVzdGFkaW8nKVxuICAgICAgICAgICAgLnNlbGVjdCgnZXN0YWRpb3MuVWJpY2FjaW9uX0VzdGFkaW8gYXMgQ2l1ZGFkJylcbiAgICAgICAgICAgIC5qb2luKCdkdCcsJ2VxdWlwb3MuRFRfRXF1aXBvJywnPScsJ2R0LmlkJylcbiAgICAgICAgICAgIC5zZWxlY3QoJ2R0Lk5vbWJyZV9EVCBhcyBEaXJlY3Rvcl9UZWNuaWNvJylcbiAgICAgICAgICAgIHJldHVybiBFcXVpcG9zXG4gICAgICAgIH1jYXRjaFxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuYmFkUmVxdWVzdCgnQWxnbyBzYWxpbyBtYWwnKVxuICAgICAgICB9XG4gICAgfVxuICAgIFxufVxuIl19